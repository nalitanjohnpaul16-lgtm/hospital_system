-- ===========================================
-- SEED DATA FOR hospital_system
-- ===========================================

USE hospital_system;

-- ===========================================
-- 1. ROLES
-- ===========================================
INSERT IGNORE INTO roles (role_name) VALUES
('admin'),
('doctor'),
('nurse'),
('inventory'),
('pharmacist'),
('it_security'),
('receptionist'),
('asset_manager'),
('auditor'),
('standard_staff'),
('visitor'),
('staff');

-- ===========================================
-- 2. USERS (LOGIN ACCOUNTS)
-- Minimal demo account required for sample clinical records
-- ===========================================

INSERT IGNORE INTO users (user_id, username, hashed_password, role_id, email, phone, pin_code) VALUES
 (1, 'admin', SHA2('Hospital@123',256), 1, 'admin@hospital.com', '+10000000000', '123456'),
 (2, 'demo_doctor', SHA2('password123',256), 2, 'demo_doctor@hospital.com', '+10000000001', '123456');

-- ===========================================
-- 3. DOCTORS
-- Minimal demo doctor linked to demo_doctor user
-- ===========================================

INSERT IGNORE INTO doctors (
    doctor_id, user_id, first_name, last_name, specialization,
    contact_number, email, pin_code, biometric_face_data,
    biometric_fingerprint_data
) VALUES
 (1, 1, 'Demo', 'Doctor', 'General Medicine', '09170000000',
  'demo_doctor@hospital.com', '1234', NULL, NULL);

-- ===========================================
-- 4. PATIENTS
-- ===========================================
INSERT IGNORE INTO patients (
    patient_id, first_name, last_name, birthdate, gender,
    contact_number, address, allergies_encrypted,
    medical_history_encrypted, biometric_face_data,
    biometric_fingerprint_data
) VALUES
 (1, 'Alex', 'Torres', '2001-05-22', 'Male',
  '09991234567', 'Quezon City', NULL, NULL, NULL, NULL),
 (2, 'Jenny', 'Lopez', '1999-10-10', 'Female',
  '09170002233', 'Manila', NULL, NULL, NULL, NULL);

-- ===========================================
-- 5. APPOINTMENTS
-- ===========================================
INSERT IGNORE INTO appointments (
    appointment_id, doctor_id, patient_id, enc_doctor_id, enc_patient_id,
    appointment_date, purpose, status
) VALUES
 (1, 1, 1, 'enc(1)', 'enc(1)', '2025-02-01 09:00:00', 'Regular Checkup', 'Scheduled'),
 (2, 1, 2, 'enc(1)', 'enc(2)', '2025-02-01 10:30:00', 'Follow-up', 'Scheduled');
-- ===========================================
-- 6. DIAGNOSES
-- ===========================================
INSERT IGNORE INTO diagnoses (
    diagnosis_id, patient_id, doctor_id,
    diagnosis_encrypted
) VALUES
 (1, 1, 1, 'encrypted_diagnosis_1'),
 (2, 2, 1, 'encrypted_diagnosis_2');
-- ===========================================
-- 7. PRESCRIPTIONS
-- ===========================================
INSERT IGNORE INTO prescriptions (
    prescription_id, patient_id, doctor_id,
    medications_encrypted
) VALUES
 (1, 1, 1, 'encrypted_meds_1'),
 (2, 2, 1, 'encrypted_meds_2');
-- ===========================================
-- 8. MEDICAL INVENTORY
-- ===========================================
INSERT INTO medical_inventory (
    item_id, item_name, stock_quantity, sensitive_flag
) VALUES
(1, 'Paracetamol 500mg', 200, 0),
(2, 'Amoxicillin 250mg', 100, 1);

-- ===========================================
-- 9. INVENTORY TRANSACTIONS
-- ===========================================
INSERT INTO inventory_transactions (
    transaction_id, item_id, quantity, transaction_type
) VALUES
(1, 1, 10, 'dispense'),
(2, 2, 5, 'restock');

-- ===========================================
-- 10. AUDIT LOGS
-- (No seed audit events; logs will be generated by real activity)
-- ===========================================


-- ===========================================
-- 11. ASSETS
-- ===========================================
INSERT INTO assets (asset_name, type, value, owner, security_classification) VALUES
 ('Patient Medical Records','Digital','Very High','Admin / Doctors','Highly Confidential'),
 ('User Accounts','Digital','High','Admin','Confidential'),
 ('Biometric Templates','Digital','Very High','IT Security','Highly Confidential'),
 ('Audit Logs','Digital','High','IT Security / Auditor','Confidential'),
 ('Inventory Stock Records','Digital','Medium','Inventory Staff','Internal Use'),
 ('Hospital System Server','Infrastructure','Very High','IT Security','Critical'),
 ('Threat Assessment Records','Digital','Medium','IT Security','Confidential');

-- ===========================================
-- 12. THREATS
-- ===========================================
INSERT INTO threats (threat, vulnerability, likelihood, impact, countermeasure) VALUES
 ('Unauthorized Access','Weak or shared passwords','Medium','Very High','MFA + PIN + Biometric Verification'),
 ('Data Breach','Unencrypted sensitive fields','Low','Very High','AES-128 Fernet Encryption'),
 ('Unauthorized Record Editing','Role bypass or missing validation','Medium','High','RBAC + Biometric/PIN Edit Verification'),
 ('Account Misuse','Inactive or unverified accounts','Medium','Medium','Admin review & Ban functionality'),
 ('Insider Threat','Excessive privileges','Low','High','Audit Logs + RBAC enforcement'),
 ('System Downtime','Server hardware failure','Low','Critical','Backup + Failover Server');

-- ===========================================
-- 13. INCIDENTS
-- ===========================================
INSERT INTO incidents (incident_type, date_time, affected_systems, actions_taken, status) VALUES
 ('Failed Login Attempts','2025-11-23 10:00:00','Login Module','Account locked and logged','Resolved'),
 ('Unauthorized Edit Attempt','2025-11-23 09:20:00','Patients Module','PIN required; action flagged in Audit Logs','Investigating'),
 ('Biometric Verification Failure','2025-11-23 01:10:00','Biometric Module','User asked to verify via email/phone','Resolved'),
 ('Inventory Data Tampering','2025-11-22 14:30:00','Inventory Module','Access restricted; Admin notified','Open');

-- ===========================================
-- 14. BIA
-- ===========================================
INSERT INTO bia (asset, threat_scenario, financial_impact, operational_impact, recovery_strategy) VALUES
 ('Patient Medical Records','Data Breach / Unauthorized Access','₱5M+','Critical delays in patient care','Encrypted backups + MFA + Audit Monitoring'),
 ('Hospital System Server','Server Failure / Downtime','₱2M','All modules inaccessible','Failover + Redundancy + Scheduled Maintenance'),
 ('Inventory Stock Records','Data Corruption / Unauthorized Edit','₱500k','Delayed medication dispensing','Restore backups + Audit Logs Review'),
 ('User Accounts','Credential Compromise / Account Misuse','₱1M','Unauthorized system access','Reset credentials + MFA + PIN Verification'),
 ('Threat Assessment Records','Unauthorized Modification','₱200k','Security reports invalid','Admin approval + RBAC + Audit Log Tracking');

-- ===========================================
-- 15. AUDIT LOGIN EVENTS
-- (No seed login entries; these will be created by real logins)
-- ===========================================

-- ===========================================
-- 16. CRYPTOGRAPHY LOGS (demo outputs)
-- ===========================================
INSERT INTO crypto_logs (context, output) VALUES
 ('demo_encryption', 'Fernet demo executed OK'),
 ('password_hash', 'bcrypt hash generated in demo');

-- ===========================================
-- 17. BIOMETRICS (user-centric)
-- ===========================================
