{% extends 'layout.html' %}
{% block content %}
<div class="content-wrap">
  <h1>Cryptography üîê Encryption + Decryption + MFA + Login Demo</h1>
  <p>This demonstrates password hashing (bcrypt), OTP/MFA generation, and symmetric encryption/decryption using Fernet (AES).</p>
  <pre class="preblock"><code>from cryptography.fernet import Fernet
import bcrypt, random

key = Fernet.generate_key()
cipher = Fernet(key)

# --- PASSWORD HASHING ---
password = "Admin123!".encode()
hashed = bcrypt.hashpw(password, bcrypt.gensalt())

# --- MFA ---
otp = random.randint(100000, 999999)
print("Your MFA Code:", otp)

# --- ENCRYPTION ---
data = "Patient Diagnosis: Hypertension".encode()
encrypted = cipher.encrypt(data)

# --- DECRYPTION ---
decrypted = cipher.decrypt(encrypted)

print("Hashed Password:", hashed)
print("Encrypted:", encrypted)
print("Decrypted:", decrypted.decode())
</code></pre>
  <p>This fulfills the cryptography requirement (deliverable #4).</p>

  <hr>
  <h2>LEGAL & ETHICAL COMPLIANCE MEASURES</h2>
  <ul>
    <li>Data Privacy Laws (GDPR/PH laws equivalent)</li>
    <li>Ethical data handling policies</li>
    <li>Physician-patient confidentiality</li>
    <li>Principle of least privilege</li>
    <li>Staff background checks</li>
    <li>Secure disposal of patient information</li>
  </ul>

  <h2>INCIDENT HANDLING & REPORTING PLAN</h2>
  <p>Incident Steps (NIST Standard)</p>
  <ol>
    <li>Identification ‚Äì Detect the incident</li>
    <li>Containment ‚Äì Stop the spread</li>
    <li>Eradication ‚Äì Remove malware / unauthorized access</li>
    <li>Recovery ‚Äì Restore operations</li>
    <li>Lessons Learned ‚Äì Improve controls</li>
  </ol>

  <h2>Incident Report Form (Sample)</h2>
  <div class="table-wrap">
    <table class="table">
      <thead>
        <tr><th>Field</th><th>Input</th></tr>
      </thead>
      <tbody>
        <tr><td>Incident Type</td><td>Unauthorized Access</td></tr>
        <tr><td>Date &amp; Time</td><td>11/15/2025 ‚Äì 4:20 PM</td></tr>
        <tr><td>Affected Systems</td><td>Staff Login System</td></tr>
        <tr><td>Actions Taken</td><td>Account locked, MFA reset, logs reviewed</td></tr>
        <tr><td>Status</td><td>Resolved</td></tr>
      </tbody>
    </table>
  </div>

  <h2>Controls Overview</h2>
  <h3>Physical Controls</h3>
  <ul>
    <li>Face recognition access at server room</li>
    <li>Fingerprint scanner for login fallback</li>
    <li>CCTV monitoring of critical IT areas</li>
    <li>Secure server room with card-access door</li>
    <li>Visitor logs and restricted zones</li>
  </ul>

  <h3>Technical Controls</h3>
  <ul>
    <li>Multi-factor authentication (SMS code)</li>
    <li>Password hashing (bcrypt)</li>
    <li>Encryption &amp; decryption of patient data (Fernet AES)</li>
    <li>Biometric authentication (face recognition)</li>
    <li>PIN authentication before editing data</li>
    <li>Role-Based Access Control (RBAC)</li>
    <li>Automatic session timeout</li>
    <li>Firewall, IDS/IPS, anti-malware</li>
    <li>Encrypted backup storage</li>
  </ul>

  <h3>Administrative Controls</h3>
  <ul>
    <li>Security policies &amp; SOPs</li>
    <li>Incident reporting procedures</li>
    <li>Employee cybersecurity training</li>
    <li>Access control policy</li>
    <li>Data privacy compliance (HIPAA-like model)</li>
    <li>Regular vulnerability assessments</li>
    <li>Business Continuity Plan (BCP)</li>
  </ul>
</div>
{% endblock %}
